(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{38:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n(31),r=n.n(a),i=(n(38),n(5)),s=n(3),o=n.n(s),j=n(8),l=n(2),u=n(7),d=n.n(u);var b=function(e){var t=Object(c.useState)(!1),n=Object(l.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(!1),s=Object(l.a)(i,2),u=s[0],b=s[1];return Object(c.useEffect)((function(){if(e){var t=function(){var t=Object(j.a)(o.a.mark((function t(){var n;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.get("/user/info",{headers:{Authorization:e}});case 3:n=t.sent,r(!0),1===n.data.role?b(!0):b(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),alert(t.t0.data);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(){return t.apply(this,arguments)}}();t()}}),[e]),{isLogged:[a,r],isAdmin:[u,b]}};var O=function(e){var t=Object(c.useState)([]),n=Object(l.a)(t,2),a=n[0],r=n[1],i=Object(c.useState)(!1),s=Object(l.a)(i,2),u=s[0],b=s[1];return Object(c.useEffect)((function(){var e=function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/api/notes");case 2:t=e.sent,r(t.data.noteList);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[u,b]),{notes:[a,r],callback:[u,b]}},p=n(0),h=Object(c.createContext)(),x=function(e){var t=e.children,n=Object(c.useState)(!1),a=Object(l.a)(n,2),r=a[0],i=a[1],s=function(){var e=Object(j.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/user/refresh_token");case 2:t=e.sent,i(t.data.accesstoken);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){localStorage.getItem("firstLogin")&&s()}),[]);var u={token:[r,i],userApi:b(r),notesApi:O()};return Object(p.jsx)(h.Provider,{value:u,children:t})};var f=function(e){var t=Object(c.useContext)(h),n=Object(l.a)(t.userApi.isLogged,1)[0],a=Object(l.a)(t.userApi.isAdmin,1)[0],r=function(){var e=Object(j.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.get("/user/logout");case 2:localStorage.clear(),window.location.href="/";case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(p.jsxs)("header",{children:[Object(p.jsx)("div",{className:"logo",children:Object(p.jsx)("h1",{children:Object(p.jsxs)(i.b,{to:"/",children:[" ",a?"Admin":"Notes App"]})})}),Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/",children:" Notes "})}),a&&Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/create_note",children:"Create Notes"})})}),n?Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/",onClick:r,children:" Logout"})})}):Object(p.jsx)("li",{children:Object(p.jsx)(i.b,{to:"/login",children:"Login or Register"})})]})]})},m=n(4),v=n(14),g=n(12);var w=function(e){var t=Object(c.useState)({email:"",password:""}),n=Object(l.a)(t,2),a=n[0],r=n[1],s=function(e){var t=e.target,n=t.name,c=t.value;r(Object(g.a)(Object(g.a)({},a),{},Object(v.a)({},n,c)))},u=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/user/login",Object(g.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"login-page",children:Object(p.jsxs)("form",{onSubmit:u,children:[Object(p.jsx)("h2",{children:"Login"}),Object(p.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:s}),Object(p.jsx)("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:s}),Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("button",{type:"submit",children:"Login"}),Object(p.jsx)(i.b,{to:"/register",children:"Register"})]})]})})};var N=function(e){var t=Object(c.useState)({firstName:"",lastName:"",email:"",password:""}),n=Object(l.a)(t,2),a=n[0],r=n[1],s=function(e){var t=e.target,n=t.name,c=t.value;r(Object(g.a)(Object(g.a)({},a),{},Object(v.a)({},n,c)))},u=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,d.a.post("/user/register",Object(g.a)({},a));case 4:localStorage.setItem("firstLogin",!0),window.location.href="/",e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"login-page",children:Object(p.jsxs)("form",{onSubmit:u,children:[Object(p.jsx)("h2",{children:"Register"}),Object(p.jsx)("input",{type:"text",name:"firstName",required:!0,placeholder:"First Name",value:a.firstName,onChange:s}),Object(p.jsx)("input",{type:"text",name:"lastName",required:!0,placeholder:"Last Name",value:a.lastName,onChange:s}),Object(p.jsx)("input",{type:"email",name:"email",required:!0,placeholder:"Email",value:a.email,onChange:s}),Object(p.jsx)("input",{type:"password",name:"password",required:!0,autoComplete:"on",placeholder:"Password",value:a.password,onChange:s}),Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("button",{type:"submit",children:"Register"}),Object(p.jsx)(i.b,{to:"/login",children:"Login"})]})]})})};var k=function(e){var t=e.note,n=e.deleteNote,a=Object(c.useContext)(h),r=Object(l.a)(a.userApi.isAdmin,1)[0];return Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"row_btn",children:r?Object(p.jsxs)(p.Fragment,{children:[Object(p.jsx)(i.b,{id:"btn-view",to:"/detail/".concat(t._id),children:Object(p.jsx)("button",{children:"View"})}),Object(p.jsx)(i.b,{to:"#!",onClick:function(){return n(t._id)},children:Object(p.jsx)("button",{id:"btn-buy",children:"Delete"})}),Object(p.jsx)(i.b,{to:"/update_note/".concat(t._id),children:Object(p.jsx)("button",{id:"btn-edit",children:"Edit"})})]}):Object(p.jsx)(p.Fragment,{children:Object(p.jsx)(i.b,{id:"btn-view",to:"/detail/".concat(t._id),children:Object(p.jsx)("button",{children:"View"})})})})})};var A=function(e){var t=e.note,n=e.deleteNote;return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"row_card",children:[Object(p.jsx)("div",{className:"product_box",children:Object(p.jsxs)("h2",{title:t.title,children:[" ",t.title]})}),Object(p.jsx)(k,{note:t,deleteNote:n})]})})};var _=function(){var e=Object(c.useContext)(h),t=Object(l.a)(e.token,1)[0],n=Object(l.a)(e.notesApi.callback,2),a=n[0],r=n[1],i=Object(l.a)(e.notesApi.notes,1)[0],s=Object(l.a)(e.userApi.isAdmin,1)[0],u=function(){var e=Object(j.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!s){e.next=5;break}return e.next=4,d.a.delete("/api/notes/".concat(n),{headers:{Authorization:t}});case 4:r(!a);case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.response.msg);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)(p.Fragment,{children:Object(p.jsxs)("div",{className:"products",children:[Object(p.jsx)("div",{className:"todo_heading",children:Object(p.jsx)("h1",{children:"TODO LIST"})}),i.map((function(e){return Object(p.jsx)(A,{note:e,isAdmin:s,deleteNote:u},e._id)}))]})})};var y=function(e){var t=Object(m.g)(),n=Object(c.useContext)(h),a=Object(l.a)(n.notesApi.notes,1)[0],r=Object(c.useState)([]),i=Object(l.a)(r,2),s=i[0],o=i[1];return Object(c.useEffect)((function(){t.id&&a.forEach((function(e){e._id===t.id&&o(e)}))}),[t.id,a]),0===s.length?null:Object(p.jsx)(p.Fragment,{children:Object(p.jsx)("div",{className:"box",children:Object(p.jsxs)("div",{className:"box-detail",children:[Object(p.jsx)("div",{className:"row",children:Object(p.jsx)("h2",{children:s.title})}),Object(p.jsx)("p",{children:s.description})]})})})},C={noteList_id:"",title:"",description:"",_id:""};var L=function(e){var t=Object(c.useContext)(h),n=Object(l.a)(t.userApi.isAdmin,1)[0],a=Object(l.a)(t.token,1)[0],r=Object(l.a)(t.notesApi.callback,2),i=r[0],s=r[1],u=Object(c.useState)(C),b=Object(l.a)(u,2),O=b[0],x=b[1],f=Object(m.g)(),w=Object(m.f)(),N=Object(c.useState)(!1),k=Object(l.a)(N,2),A=k[0],_=k[1],y=Object(l.a)(t.notesApi.notes,1)[0];Object(c.useEffect)((function(){f.id?(_(!0),y.forEach((function(e){e._id===f.id&&x(e)}))):(_(!1),x(C))}),[f.id,n,y]);var L=function(e){var t=e.target,n=t.name,c=t.value;x(Object(g.a)(Object(g.a)({},O),{},Object(v.a)({},n,c)))},S=function(){var e=Object(j.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),e.prev=1,!A){e.next=8;break}return e.next=5,d.a.put("/api/notes/".concat(O._id),Object(g.a)({},O),{headers:{Authorization:a}});case 5:s(!i),e.next=11;break;case 8:return e.next=10,d.a.post("/api/notes",Object(g.a)({},O),{headers:{Authorization:a}});case 10:s(!i);case 11:x(C),w.push("/"),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),alert(e.t0.response.data.msg);case 18:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(t){return e.apply(this,arguments)}}();return Object(p.jsx)("div",{className:"margin",children:Object(p.jsx)("div",{className:"create_product",children:Object(p.jsxs)("form",{onSubmit:S,children:[Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("label",{htmlFor:"noteList_id",children:"Notes ID"}),Object(p.jsx)("input",{type:"text",name:"noteList_id",id:"noteList_id",required:!0,value:O.noteList_id,onChange:function(e){return L(e)},disabled:A})]}),Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("label",{htmlFor:"title",children:"Title"}),Object(p.jsx)("input",{type:"text",name:"title",id:"title",required:!0,value:O.title,onChange:function(e){return L(e)}})]}),Object(p.jsxs)("div",{className:"row",children:[Object(p.jsx)("label",{htmlFor:"description",children:"Description"}),Object(p.jsx)("textarea",{type:"text",name:"description",id:"description",required:!0,value:O.description,rows:"13",onChange:function(e){return L(e)}})]}),Object(p.jsx)("button",{type:"submit",children:A?"Update":"Create"})]})})})};var S=function(e){return Object(p.jsxs)(m.c,{children:[Object(p.jsx)(m.a,{exact:!0,path:"/",component:_}),Object(p.jsx)(m.a,{exact:!0,path:"/detail/:id",component:y}),Object(p.jsx)(m.a,{exact:!0,path:"/login",component:w}),Object(p.jsx)(m.a,{exact:!0,path:"/register",component:N}),Object(p.jsx)(m.a,{exact:!0,path:"/create_note",component:L}),Object(p.jsx)(m.a,{exact:!0,path:"/update_note/:id",component:L})]})};var F=function(){return Object(p.jsx)(x,{children:Object(p.jsx)(i.a,{children:Object(p.jsxs)("div",{className:"App",children:[Object(p.jsx)(f,{}),Object(p.jsx)(S,{})]})})})};r.a.render(Object(p.jsx)(F,{}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.ecce1b93.chunk.js.map